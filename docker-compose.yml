version: '3.8'
services:
  eureka-server:
    image: netflix/eureka
    ports:
      - '8761:8761'
    entrypoint: ["java", "-Djava.security.egd=file:/dev/./urandom", "-jar", "eureka-server.jar"]
    networks:
      - microservices
    environment:
      - eureka.client.register-with-eureka=false
      - eureka.client.fetch-registry=false
      - eureka.server.enableSelfPreservation=false
    healthcheck:
      test: ["CMD-SHELL", "wget --quiet --tries=1 -O /dev/null http://localhost:8761/actuator/health || exit 1"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 40s
  # Add your other services here

networks:
  microservices:
    driver: bridge

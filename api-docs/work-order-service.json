{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://dev.oficina-mecanica.com","description":"Generated server url"}],"tags":[{"name":"Ordens de Serviço","description":"Gerenciamento de ordens de serviço"}],"paths":{"/api/ordens-servico/{id}":{"get":{"tags":["Ordens de Serviço"],"summary":"Buscar ordem de serviço por ID","description":"Busca uma ordem de serviço específica pelo ID","operationId":"buscarPorId","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Ordem de serviço encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}},"security":[{"bearerAuth":[]}]},"put":{"tags":["Ordens de Serviço"],"summary":"Atualizar ordem de serviço","description":"Atualiza informações de uma ordem de serviço","operationId":"atualizar","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OsRequestDTO"}}},"required":true},"responses":{"200":{"description":"Ordem de serviço atualizada com sucesso","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"400":{"description":"Dados inválidos","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Ordens de Serviço"],"summary":"Deletar ordem de serviço","description":"Remove uma ordem de serviço do sistema","operationId":"deletar","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Ordem de serviço deletada com sucesso"},"404":{"description":"Ordem de serviço não encontrada"}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/{id}/finalizar":{"put":{"tags":["Ordens de Serviço"],"summary":"Finalizar ordem de serviço","description":"Finaliza a ordem de serviço e atualiza o status para FINALIZADA","operationId":"finalizar","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"observacoes","in":"query","description":"Observações sobre a finalização","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Ordem de serviço finalizada com sucesso","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/{id}/executar":{"put":{"tags":["Ordens de Serviço"],"summary":"Iniciar execução da ordem de serviço","description":"Inicia a execução da ordem de serviço e atualiza o status para EM_EXECUCAO","operationId":"executar","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"observacoes","in":"query","description":"Observações sobre a execução","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Execução iniciada com sucesso","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/{id}/entregar":{"put":{"tags":["Ordens de Serviço"],"summary":"Registrar entrega do veículo ao cliente","description":"Registra a entrega do veículo ao cliente e atualiza o status para ENTREGUE","operationId":"entregar","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"observacoes","in":"query","description":"Observações sobre a entrega","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Entrega registrada com sucesso","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/{id}/diagnosticar":{"put":{"tags":["Ordens de Serviço"],"summary":"Realizar diagnóstico da ordem de serviço","description":"Realiza o diagnóstico e atualiza o status para EM_DIAGNOSTICO","operationId":"diagnosticar","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"observacoes","in":"query","description":"Observações do diagnóstico","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Diagnóstico realizado com sucesso","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/{id}/atribuir-mecanico":{"put":{"tags":["Ordens de Serviço"],"summary":"Atribuir mecânico à ordem de serviço","description":"Atribui um mecânico a uma ordem de serviço","operationId":"atribuirMecanico","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"mecanicoId","in":"query","description":"ID do mecânico","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Mecânico atribuído com sucesso","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico":{"get":{"tags":["Ordens de Serviço"],"summary":"Listar todas as ordens de serviço","description":"Lista todas as ordens de serviço, com filtro opcional por status","operationId":"listarTodos","parameters":[{"name":"status","in":"query","description":"Lista de status para filtrar","required":false,"schema":{"type":"array","items":{"type":"string","enum":["RECEBIDA","EM_DIAGNOSTICO","AGUARDANDO_APROVACAO","EM_EXECUCAO","FINALIZADA","ENTREGUE","REPROVADA","CANCELADA"]}}}],"responses":{"200":{"description":"Lista retornada com sucesso","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Ordens de Serviço"],"summary":"Criar ordem de serviço","description":"Cria uma nova ordem de serviço","operationId":"criar","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OsRequestDTO"}}},"required":true},"responses":{"201":{"description":"Ordem de serviço criada com sucesso","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"400":{"description":"Dados inválidos","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"404":{"description":"Cliente ou veículo não encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/{id}/servicos":{"post":{"tags":["Ordens de Serviço"],"summary":"Adicionar serviços à ordem de serviço","description":"Adiciona serviços a uma ordem de serviço existente","operationId":"adicionarServicos","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","description":"Lista de IDs dos serviços","items":{"type":"integer","format":"int64"}}}},"required":true},"responses":{"200":{"description":"Serviços adicionados com sucesso","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OsItemDTO"}}}}},"400":{"description":"Não é possível adicionar serviços em ordem aguardando aprovação","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OsItemDTO"}}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OsItemDTO"}}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Ordens de Serviço"],"summary":"Remover serviços da ordem de serviço","description":"Remove serviços de uma ordem de serviço existente","operationId":"removerServicos","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","description":"Lista de IDs dos serviços","items":{"type":"integer","format":"int64"}}}},"required":true},"responses":{"200":{"description":"Serviços removidos com sucesso","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"400":{"description":"Não é possível remover serviços em ordem aguardando aprovação","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/{id}/produtos":{"post":{"tags":["Ordens de Serviço"],"summary":"Adicionar produtos à ordem de serviço","description":"Adiciona produtos a uma ordem de serviço existente","operationId":"adicionarProdutos","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","description":"Lista de produtos com quantidade e preço","items":{"$ref":"#/components/schemas/ItemOrdemServicoDTO"}}}},"required":true},"responses":{"200":{"description":"Produtos adicionados com sucesso","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OsItemDTO"}}}}},"400":{"description":"Não é possível adicionar produtos em ordem aguardando aprovação","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OsItemDTO"}}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OsItemDTO"}}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Ordens de Serviço"],"summary":"Remover produtos da ordem de serviço","description":"Remove produtos de uma ordem de serviço existente","operationId":"removerProdutos","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","description":"Lista de IDs dos produtos","items":{"type":"integer","format":"int64"}}}},"required":true},"responses":{"200":{"description":"Produtos removidos com sucesso","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"400":{"description":"Não é possível remover produtos em ordem aguardando aprovação","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/{id}/orcamento":{"get":{"tags":["Ordens de Serviço"],"summary":"Buscar orçamento da ordem de serviço","description":"Busca o orçamento associado a uma ordem de serviço","operationId":"buscarOrcamento","parameters":[{"name":"id","in":"path","description":"ID da ordem de serviço","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Orçamento encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrcamentoResumoDTO"}}}},"204":{"description":"Ordem de serviço não possui orçamento","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrcamentoResumoDTO"}}}},"404":{"description":"Ordem de serviço não encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrcamentoResumoDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/por-veiculo/{veiculoId}":{"get":{"tags":["Ordens de Serviço"],"summary":"Buscar ordens de serviço por veículo","description":"Lista todas as ordens de serviço de um veículo específico","operationId":"buscarPorVeiculo","parameters":[{"name":"veiculoId","in":"path","description":"ID do veículo","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Lista retornada com sucesso","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrdemServicoResumoDTO"}}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/por-mecanico/{mecanicoId}":{"get":{"tags":["Ordens de Serviço"],"summary":"Buscar ordens de serviço por mecânico","description":"Lista todas as ordens de serviço atribuídas a um mecânico específico","operationId":"buscarPorMecanico","parameters":[{"name":"mecanicoId","in":"path","description":"ID do mecânico","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Lista retornada com sucesso","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/por-cliente/{clienteId}":{"get":{"tags":["Ordens de Serviço"],"summary":"Buscar ordens de serviço por cliente","description":"Lista todas as ordens de serviço de um cliente específico","operationId":"buscarPorCliente","parameters":[{"name":"clienteId","in":"path","description":"ID do cliente","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Lista retornada com sucesso","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrdemServicoResumoDTO"}}}}}},"security":[{"bearerAuth":[]}]}},"/api/ordens-servico/aprovadas":{"get":{"tags":["Ordens de Serviço"],"summary":"Listar ordens de serviço aprovadas","description":"Lista todas as ordens de serviço com status aprovado","operationId":"listarAprovadas","responses":{"200":{"description":"Lista retornada com sucesso","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrdemServicoResponseDTO"}}}}}},"security":[{"bearerAuth":[]}]}}},"components":{"schemas":{"ItemOrdemServicoDTO":{"type":"object","properties":{"produtoCatalogoId":{"type":"integer","format":"int64"},"quantidade":{"type":"integer","format":"int32"},"precoUnitario":{"type":"number"}}},"OsRequestDTO":{"type":"object","properties":{"clienteId":{"type":"integer","format":"int64"},"veiculoId":{"type":"integer","format":"int64"},"observacoes":{"type":"string"},"servicosIds":{"type":"array","items":{"type":"integer","format":"int64"}},"produtos":{"type":"array","items":{"$ref":"#/components/schemas/ItemOrdemServicoDTO"}}},"required":["clienteId","veiculoId"]},"ClienteResumoDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"nome":{"type":"string"},"email":{"type":"string"},"telefone":{"type":"string"}}},"OrcamentoResumoDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"status":{"type":"string","enum":["CRIADO","APROVADO","REPROVADO"]},"valorTotal":{"type":"number"},"dataCriacao":{"type":"string","format":"date-time"}}},"OrdemServicoResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"status":{"type":"string","enum":["RECEBIDA","EM_DIAGNOSTICO","AGUARDANDO_APROVACAO","EM_EXECUCAO","FINALIZADA","ENTREGUE","REPROVADA","CANCELADA"]},"dataCriacao":{"type":"string","format":"date-time"},"dataInicioExecucao":{"type":"string","format":"date-time"},"dataTerminoExecucao":{"type":"string","format":"date-time"},"dataEntrega":{"type":"string","format":"date-time"},"observacoes":{"type":"string"},"veiculo":{"$ref":"#/components/schemas/VeiculoResumoDTO"},"cliente":{"$ref":"#/components/schemas/ClienteResumoDTO"},"mecanico":{"$ref":"#/components/schemas/UsuarioResponseDTO"},"servicos":{"type":"array","items":{"$ref":"#/components/schemas/ServicoResponseDTO"}},"itensOrdemServico":{"type":"array","items":{"$ref":"#/components/schemas/ItemOrdemServicoDTO"}},"orcamento":{"$ref":"#/components/schemas/OrcamentoResumoDTO"}}},"ServicoResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"nome":{"type":"string"},"descricao":{"type":"string"},"categoria":{"type":"string","enum":["MECANICO","ELETRICO","FREIOS","ALINHAMENTO","SUSPENSAO"]},"precoBase":{"type":"number"},"tempoEstimadoMinutos":{"type":"integer","format":"int64"},"ativo":{"type":"boolean"}}},"UsuarioResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"nome":{"type":"string"},"role":{"type":"string"}}},"VeiculoResumoDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"placa":{"type":"string"},"marca":{"type":"string"},"modelo":{"type":"string"},"ano":{"type":"integer","format":"int32"}}},"OsItemDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"nome":{"type":"string"},"ativo":{"type":"boolean"},"descricao":{"type":"string"}}},"OrdemServicoResumoDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"status":{"type":"string","enum":["RECEBIDA","EM_DIAGNOSTICO","AGUARDANDO_APROVACAO","EM_EXECUCAO","FINALIZADA","ENTREGUE","REPROVADA","CANCELADA"]},"dataCriacao":{"type":"string","format":"date-time"},"veiculoId":{"type":"integer","format":"int64"},"clienteId":{"type":"integer","format":"int64"},"mecanicoId":{"type":"integer","format":"int64"},"orcamentoId":{"type":"integer","format":"int64"}}}}}}